<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>OPTA-PROG-MODBUS7M-PROGFINDER</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
	margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-default_background {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray_background {
	background: rgba(248, 248, 247, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(248, 243, 252, 1);
}
.highlight-pink_background {
	background: rgba(252, 241, 246, 1);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-default_background {
	color: inherit;
	fill: inherit;
}
.block-color-gray_background {
	background: rgba(248, 248, 247, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(248, 243, 252, 1);
}
.block-color-pink_background {
	background: rgba(252, 241, 246, 1);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-uiBlue { background-color: undefined; }
.select-value-color-pink { background-color: rgba(225, 136, 179, 0.27); }
.select-value-color-purple { background-color: rgba(168, 129, 197, 0.27); }
.select-value-color-green { background-color: rgba(123, 183, 129, 0.27); }
.select-value-color-gray { background-color: rgba(84, 72, 49, 0.15); }
.select-value-color-transparentGray { background-color: undefined; }
.select-value-color-translucentGray { background-color: undefined; }
.select-value-color-orange { background-color: rgba(224, 124, 57, 0.27); }
.select-value-color-brown { background-color: rgba(210, 162, 141, 0.35); }
.select-value-color-red { background-color: rgba(244, 171, 159, 0.4); }
.select-value-color-yellow { background-color: rgba(236, 191, 66, 0.39); }
.select-value-color-blue { background-color: rgba(93, 165, 206, 0.27); }
.select-value-color-pageGlass { background-color: undefined; }
.select-value-color-washGlass { background-color: undefined; }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="1c30e086-72bf-80ca-a5c9-ead3d50d0340" class="page sans"><header><h1 class="page-title">OPTA-PROG-MODBUS7M-PROGFINDER</h1><p class="page-description"></p></header><div class="page-body"><h1 id="1c30e086-72bf-8070-80ec-e3fd78fb2d0a" class="">Programação OPTA com 7M (Modbus) - Programação Finder Brasil</h1><h3 id="1c30e086-72bf-8003-96e7-d2c8d5a408f2" class="">OPTA Programming with 7M (Modbus) - Finder Brazil Programming</h3><p id="1c30e086-72bf-80a0-ba01-fa2c5eb10680" class="">
</p><p id="1c30e086-72bf-802c-830e-ea68f7f11bab" class="">
</p><div id="1c30e086-72bf-8071-8573-c038f0bfdfc8" class="column-list"><div id="1c30e086-72bf-806d-bc42-cc828e8d5463" style="width:50%" class="column"><h2 id="1c30e086-72bf-80d8-8785-f4ebcb40629f" class=""><strong>1. Informações Gerais</strong></h2><ul id="1c30e086-72bf-809d-95ea-efc106cca68f" class="bulleted-list"><li style="list-style-type:disc">Versão / Revisão: Revisão 1</li></ul><ul id="1c30e086-72bf-8011-9109-c58fd941127f" class="bulleted-list"><li style="list-style-type:disc">Data de Desenvolvimento: 10/05/2023</li></ul><ul id="1c30e086-72bf-8084-a8d9-de513c324757" class="bulleted-list"><li style="list-style-type:disc">Autor: Daniel Arcos</li></ul><ul id="1c30e086-72bf-809e-ba80-f4ecb67973d9" class="bulleted-list"><li style="list-style-type:disc">Linguagem: C++</li></ul><ul id="1c30e086-72bf-8072-b702-c2b20d35b4d7" class="bulleted-list"><li style="list-style-type:disc">Plataforma / Hardware:  Finder OPTA</li></ul><p id="1c30e086-72bf-802e-aee9-d68bc9cef730" class="">
</p></div><div id="1c30e086-72bf-80bd-8dc8-de3327eaf04b" style="width:50%" class="column"><h2 id="1c30e086-72bf-805f-9944-ce9772df9297" class="">1. General Information</h2><ul id="1c30e086-72bf-800b-bbd3-f2e2c9aa9a02" class="bulleted-list"><li style="list-style-type:disc">Version/Revision: Revision 1</li></ul><ul id="1c30e086-72bf-8069-af72-e8171e8d7dba" class="bulleted-list"><li style="list-style-type:disc">Development Date: 10/05/2023</li></ul><ul id="1c30e086-72bf-803b-8263-dfeea7b9df69" class="bulleted-list"><li style="list-style-type:disc">Author: Daniel Arcos</li></ul><ul id="1c30e086-72bf-80f8-bef4-f6476ecb979c" class="bulleted-list"><li style="list-style-type:disc">Language: C++</li></ul><ul id="1c30e086-72bf-8058-add0-d1e89ee30f81" class="bulleted-list"><li style="list-style-type:disc">Platform/Hardware: Finder OPTA</li></ul></div></div><div id="1c30e086-72bf-80d9-859c-fe42aa46130e" class="column-list"><div id="1c30e086-72bf-8039-a035-fb56f1fe6d40" style="width:50%" class="column"><h2 id="1c30e086-72bf-8034-8c17-c28a1f22e189" class=""><strong>2. Objetivo da Programação</strong></h2><p id="1c30e086-72bf-806b-8756-f914eeb5c550" class="">
</p><p id="1c30e086-72bf-8030-83cb-e6f5910d5078" class=""><em>Esse programação tem como finalidade estabelecer a conexão entre o OPTA e o 7M (Medidor de energia da Finder), utilizando o protocolo Modbus, permitindo a leitura de todos os parâmetros disponíveis.</em></p></div><div id="1c30e086-72bf-80b3-8caa-cda00a487e9e" style="width:50%" class="column"><h2 id="1c30e086-72bf-801a-b62f-d616a0047ae3" class=""><strong>2. Programming Objective</strong></h2><p id="1c30e086-72bf-80c0-b57b-e4efc7ef5bbe" class="">
</p><p id="1c30e086-72bf-8012-b9d8-c34d8469ba8a" class="">This programming aims to establish the connection between the OPTA and the 7M (Finder energy meter), using the Modbus protocol, allowing the reading of all available parameters.</p><p id="1c30e086-72bf-808f-bf8f-dfeba9cfeda1" class="">
</p></div></div><p id="1c30e086-72bf-80b1-8200-f55762be04d4" class="">
</p><div id="1c30e086-72bf-8012-88b7-edf4925b499c" class="column-list"><div id="1c30e086-72bf-8091-96f9-ca97520105f0" style="width:50%" class="column"><h2 id="1c30e086-72bf-808b-ad50-d77296c0db95" class=""><strong>3. Requisitos e Dependências</strong></h2><p id="1c30e086-72bf-801d-87ed-ee501232ef1d" class="">
</p><ul id="1c30e086-72bf-806e-9cf6-c1939b37bbeb" class="bulleted-list"><li style="list-style-type:disc">Instalar o Arduino IDE em sua última versão disponível</li></ul><ul id="1c30e086-72bf-8010-b77a-ea0bb30e4d4b" class="bulleted-list"><li style="list-style-type:disc">Instalar os drivers de Hardware do OPTA no Arduino IDE</li></ul><ul id="1c30e086-72bf-806a-90d3-c2a0fe1a38ff" class="bulleted-list"><li style="list-style-type:disc">Instalar biblioteca do OPTA</li></ul><ul id="1c30e086-72bf-80de-b893-ce0bee7e9cc9" class="bulleted-list"><li style="list-style-type:disc">Instalar as bibliotecas descritas na programação</li></ul><p id="1c30e086-72bf-800c-9dba-e5f2b6cf9926" class="">
</p></div><div id="1c30e086-72bf-8083-8af2-c23fac997849" style="width:50%" class="column"><h2 id="1c30e086-72bf-80f8-96d6-d1951e444b61" class=""><strong>3. Requirements and Dependencies</strong></h2><p id="1c30e086-72bf-8085-bca6-e6d048774c40" class="">
</p><ul id="1c30e086-72bf-802d-a9b9-fa5d710a8008" class="bulleted-list"><li style="list-style-type:disc">Install the latest version of Arduino IDE</li></ul><ul id="1c30e086-72bf-80b0-82a5-d4d66eb01a66" class="bulleted-list"><li style="list-style-type:disc">Install the OPTA hardware drivers in Arduino IDE</li></ul><ul id="1c30e086-72bf-801b-b232-fc5d211e861f" class="bulleted-list"><li style="list-style-type:disc">Install the OPTA library</li></ul><ul id="1c30e086-72bf-8063-9549-c20a9a5e36a7" class="bulleted-list"><li style="list-style-type:disc">Install the libraries described in the programming</li></ul><p id="1c30e086-72bf-80d8-811e-fedb57ff926b" class="">
</p></div></div><div id="1c30e086-72bf-8033-93df-f3806173da38" class="column-list"><div id="1c30e086-72bf-80f9-ad82-c51576cfc849" style="width:50%" class="column"><h2 id="1c30e086-72bf-80d4-a664-c0c4354cb0fc" class=""><strong>4. Passo a Passo da Implementação</strong></h2><p id="1c30e086-72bf-80bf-b662-ebb4336c2671" class="">
</p><ol type="1" id="1c30e086-72bf-8064-b1ce-cb405c19dd88" class="numbered-list" start="1"><li>Incluir bibliotecas necessárias</li></ol><ol type="1" id="1c30e086-72bf-800e-9fa9-c68801b08b68" class="numbered-list" start="2"><li>Configurar os parâmetros Modbus na programação</li></ol><ol type="1" id="1c30e086-72bf-8037-8758-f96796fbcc90" class="numbered-list" start="3"><li>Configurar os parâmetros Modbus 7M</li></ol><ol type="1" id="1c30e086-72bf-803b-aaab-d0afdb16a6b6" class="numbered-list" start="4"><li>Verificar tabela de registradores Modbus do 7M</li></ol><ol type="1" id="1c30e086-72bf-8063-b9d5-c207c23c71e8" class="numbered-list" start="5"><li>Colocar endereços do registradores na programação</li></ol><p id="1c30e086-72bf-8014-ae4f-fa8563c3f3f2" class="">
</p></div><div id="1c30e086-72bf-80e6-b9a9-d84084072c4e" style="width:50%" class="column"><h2 id="1c30e086-72bf-80c3-811d-f228a3c4cffe" class=""><strong>4. Implementation Step by Step</strong></h2><p id="1c30e086-72bf-804c-8fde-cafbf05aa81d" class="">
</p><ol type="1" id="1c30e086-72bf-80a6-a6f2-ef703fb00392" class="numbered-list" start="1"><li>Include necessary libraries</li></ol><ol type="1" id="1c30e086-72bf-8045-9182-c3d1854c7c19" class="numbered-list" start="2"><li>Configure Modbus parameters in the programming</li></ol><ol type="1" id="1c30e086-72bf-80af-8bc9-f891ea036efd" class="numbered-list" start="3"><li>Configure 7M Modbus parameters</li></ol><ol type="1" id="1c30e086-72bf-805f-9343-e69ae4d8d8e3" class="numbered-list" start="4"><li>Check 7M Modbus register table</li></ol><ol type="1" id="1c30e086-72bf-8048-9cc4-f6adf8e1bdd2" class="numbered-list" start="5"><li>Enter register addresses in the programming</li></ol><p id="1c30e086-72bf-802a-b864-cfe61946a328" class="">
</p></div></div><h2 id="1c30e086-72bf-803f-be35-fbeabdfec336" class=""><strong>5. Código completo / Full code</strong></h2><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1c30e086-72bf-806f-8b4d-f90f27eeace4" class="code"><code class="language-C++">#include &lt;ArduinoModbus.h&gt;
#include &lt;ArduinoRS485.h&gt;

constexpr auto baudrate { 19200 }; 
constexpr auto btime { 1.0f / baudrate };
constexpr auto predl { btime * 9.6f * 3.5f * 1e6 };
constexpr auto postdl { btime * 9.6f * 3.5f * 1e6 };

void setup() {
  Serial.begin(115200);
  delay(2000);
  RS485.setDelays(predl, postdl);
  if (!ModbusRTUClient.begin(baudrate, SERIAL_8N2 ) ) {
    Serial.println(&quot;Erro Modbus&quot;);
    while(1);
  }

}

void loop() {
  //0x09BA - Active Power Total 32490-32491, IEEE 754 T_Float, x 1W
  float p = readdata(0x21, 0X9BA);
  //0x09C4 - Tensione 32500-32501, IEEE 754 T_Float, x 
  float v = readdata(0x21, 0X9C4);
  // 0x9D4 - corrente 32516-32517, IEEE 754 T_Float, x 1A
  float i = readdata(0x21, 0X9D4);

  Serial.println(String(p, 1) + &quot;W &quot; + String(v, 1) + &quot;V &quot; + String(i, 3) + &quot;A &quot;);
  delay(3000);
}


float readdata(int addr, int reg) {
  float res = 0.0;
  if (!ModbusRTUClient.requestFrom(addr, INPUT_REGISTERS, reg, 2)) {
    Serial.println(&quot;Erro de comunicação&quot;);
    Serial.println(ModbusRTUClient.lastError());
  } else {
    uint16_t word1 = ModbusRTUClient.read();
    uint16_t word2 = ModbusRTUClient.read();
    uint32_t parz = word1 &lt;&lt; 16 | word2;
    res = *(float *)&amp;parz;
  }
  return res;
}</code></pre><p id="1c30e086-72bf-80cb-9720-ded339020c18" class="">
</p><div id="1c30e086-72bf-806d-bb0a-d5936c8ae9da" class="column-list"><div id="1c30e086-72bf-8027-b5a7-c06d99e54af2" style="width:50%" class="column"><h2 id="1c30e086-72bf-807a-8a60-e1edf6857931" class=""><strong>6. Explicativo</strong></h2><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1c30e086-72bf-803e-8e0b-d362eaad324d" class="code"><code class="language-C++">#include &lt;ArduinoModbus.h&gt;
#include &lt;ArduinoRS485.h&gt;</code></pre><ul id="1c30e086-72bf-80c0-a1fd-eef34989fa0f" class="bulleted-list"><li style="list-style-type:disc"><code><strong>ArduinoModbus</strong></code>: Biblioteca para comunicação Modbus (suporta RTU e TCP).</li></ul><ul id="1c30e086-72bf-801a-a91d-e3545becc4b5" class="bulleted-list"><li style="list-style-type:disc"><code><strong>ArduinoRS485</strong></code>: Biblioteca para configuração do protocolo RS485 (usado no Modbus RTU).</li></ul><p id="1c30e086-72bf-80d8-90a4-fc212337871f" class="">
</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1c30e086-72bf-80ca-9f64-e6388591ff82" class="code"><code class="language-C++">constexpr auto baudrate { 19200 }; 
constexpr auto btime { 1.0f / baudrate };
constexpr auto predl { btime * 9.6f * 3.5f * 1e6 };
constexpr auto postdl { btime * 9.6f * 3.5f * 1e6 };</code></pre><ul id="1c30e086-72bf-8034-9ac8-fd089b63a800" class="bulleted-list"><li style="list-style-type:disc"><code><strong>baudrate</strong></code>: Taxa de comunicação serial (19200 bps).</li></ul><ul id="1c30e086-72bf-80da-a3fc-d611087acbd2" class="bulleted-list"><li style="list-style-type:disc"><code><strong>btime</strong></code>: Tempo por bit (1/baudrate).</li></ul><ul id="1c30e086-72bf-80ac-aa1c-c7f42cb9b7cc" class="bulleted-list"><li style="list-style-type:disc"><code><strong>predl</strong></code><strong> (Pré-delay) e </strong><code><strong>postdl</strong></code><strong> (Pós-delay)</strong>:<ul id="1c30e086-72bf-80fb-a4b7-dc2a60d1257f" class="bulleted-list"><li style="list-style-type:circle">Calculados como <strong>3.5 tempos de caractere</strong> (padrão Modbus RTU para delimitar mensagens).</li></ul><ul id="1c30e086-72bf-803f-a869-d303c06290ea" class="bulleted-list"><li style="list-style-type:circle"><code>9.6 * 3.5 * (1/baudrate) * 1e6</code> → Converte para microssegundos (µs).</li></ul><p id="1c70e086-72bf-8051-aacb-d5111b997ab3" class="">
</p></li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1c70e086-72bf-80d2-8789-c0af465f7b9c" class="code"><code class="language-C++">void setup() {
  Serial.begin(115200); // Inicia comunicação serial para debug
  delay(2000); // Espera estabilização
  RS485.setDelays(predl, postdl); // Configura delays do RS485
  if (!ModbusRTUClient.begin(baudrate, SERIAL_8N2)) {
    Serial.println(&quot;Erro Modbus&quot;);
    while(1); // Trava se falhar
  }
}</code></pre><p id="1c30e086-72bf-80e3-b0f0-c998fbe93cdc" class="">
</p><ul id="1c30e086-72bf-804f-b047-de2249084290" class="bulleted-list"><li style="list-style-type:disc"><code><strong>Serial.begin(115200)</strong></code>: Inicia a porta serial para monitoramento (debug).</li></ul><ul id="1c30e086-72bf-808f-b7ec-d342cb54708c" class="bulleted-list"><li style="list-style-type:disc"><code><strong>RS485.setDelays(predl, postdl)</strong></code>: Define os tempos de pré e pós-delay para RS485.</li></ul><ul id="1c30e086-72bf-800e-8c86-f0c223b83859" class="bulleted-list"><li style="list-style-type:disc"><code><strong>ModbusRTUClient.begin(baudrate, SERIAL_8N2)</strong></code>:<ul id="1c30e086-72bf-8064-a0b7-f26ffddb0fe8" class="bulleted-list"><li style="list-style-type:circle">Inicia comunicação Modbus RTU em <strong>19200 bps, 8 bits de dados, 2 bits de parada, sem paridade</strong> (configuração típica para medidores Finder).</li></ul><ul id="1c30e086-72bf-80b1-b8ef-e5abdac08a7c" class="bulleted-list"><li style="list-style-type:circle">Se falhar, entra em loop infinito (<code>while(1)</code>).</li></ul></li></ul><p id="1c40e086-72bf-8071-92ab-db3e7db98b79" class="">
</p><p id="1c30e086-72bf-80a1-b02c-c1f558aa963a" class="">
</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1c30e086-72bf-80ff-b8d5-fa1132e102bc" class="code"><code class="language-C++">void loop() {
  float p = readdata(0x21, 0x9BA); // Potência Ativa Total (W)
  float v = readdata(0x21, 0x9C4); // Tensão (V)
  float i = readdata(0x21, 0x9D4); // Corrente (A)

  Serial.println(String(p, 1) + &quot;W &quot; + String(v, 1) + &quot;V &quot; + String(i, 3) + &quot;A &quot;);
  delay(3000); // Espera 3s entre leituras
}</code></pre><p id="1c30e086-72bf-809d-9f3f-fd224bb3d658" class="">
</p><ul id="1c30e086-72bf-8046-b30e-c4cc0689db8e" class="bulleted-list"><li style="list-style-type:disc">Lê três parâmetros do medidor (endereço <code>0x21</code>):<ol type="1" id="1c30e086-72bf-801e-8bbc-e5f2ce79ca3a" class="numbered-list" start="1"><li><strong>Potência Ativa (0x9BA)</strong> → Em <strong>Watts (W)</strong>.</li></ol><ol type="1" id="1c30e086-72bf-8034-9a8d-dd4838fa96c1" class="numbered-list" start="2"><li><strong>Tensão (0x9C4)</strong> → Em <strong>Volts (V)</strong>.</li></ol><ol type="1" id="1c30e086-72bf-805b-9c1c-f6c2c81059b0" class="numbered-list" start="3"><li><strong>Corrente (0x9D4)</strong> → Em <strong>Ampères (A)</strong>.</li></ol></li></ul><ul id="1c30e086-72bf-8029-a31f-f3129ef28fbb" class="bulleted-list"><li style="list-style-type:disc">Exibe os valores no <strong>Serial Monitor</strong> a cada <strong>3 segundos</strong>.</li></ul><p id="1c40e086-72bf-8058-b8ff-d484a23b091d" class="">
</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1c30e086-72bf-803c-81ef-ddf0db055f89" class="code"><code class="language-C++">float readdata(int addr, int reg) {
  float res = 0.0;
  if (!ModbusRTUClient.requestFrom(addr, INPUT_REGISTERS, reg, 2)) {
    Serial.println(&quot;Erro de comunicação&quot;);
    Serial.println(ModbusRTUClient.lastError());
  } else {
    uint16_t word1 = ModbusRTUClient.read(); // Lê primeiro byte
    uint16_t word2 = ModbusRTUClient.read(); // Lê segundo byte
    uint32_t parz = word1 &lt;&lt; 16 | word2; // Combina em um uint32_t
    res = *(float *)&amp;parz; // Converte para float (IEEE 754)
  }
  return res;
}</code></pre><ul id="1c30e086-72bf-80a7-bd82-d1d7cf3b4eb6" class="bulleted-list"><li style="list-style-type:disc"><code><strong>addr</strong></code>: Endereço do dispositivo Modbus (<code>0x21</code> = 33 em decimal).</li></ul><ul id="1c30e086-72bf-8048-a2ac-e6cc58264cee" class="bulleted-list"><li style="list-style-type:disc"><code><strong>reg</strong></code>: Registro Modbus a ser lido (ex.: <code>0x9BA</code>).</li></ul><ul id="1c30e086-72bf-802d-a3d2-c73081af0119" class="bulleted-list"><li style="list-style-type:disc"><strong>Passos:</strong><ol type="1" id="1c30e086-72bf-80f3-b343-c7210afeee01" class="numbered-list" start="1"><li>Faz uma requisição Modbus (<code>INPUT_REGISTERS</code>) para ler <strong>2 registros</strong> (4 bytes, formato IEEE 754 float).</li></ol><ol type="1" id="1c30e086-72bf-80e3-977a-f9a44bfa87de" class="numbered-list" start="2"><li>Se falhar, exibe o erro.</li></ol><ol type="1" id="1c30e086-72bf-800b-98cd-cdb49d278525" class="numbered-list" start="3"><li>Se bem-sucedido:<ul id="1c30e086-72bf-8044-bf1b-d1d94e47209c" class="bulleted-list"><li style="list-style-type:disc">Lê <strong>2 words (16 bits cada)</strong>.</li></ul><ul id="1c30e086-72bf-80f2-ad3c-e9a1aea45c2b" class="bulleted-list"><li style="list-style-type:disc">Combina em um <code><strong>uint32_t</strong></code> (<code>word1 &lt;&lt; 16 | word2</code>).</li></ul><ul id="1c30e086-72bf-808d-820c-e345b5b891d2" class="bulleted-list"><li style="list-style-type:disc">Converte para <code><strong>float</strong></code> usando ponteiros (IEEE 754).</li></ul></li></ol></li></ul></div><div id="1c30e086-72bf-807f-8f69-d77b39bf30ab" style="width:50%" class="column"><h2 id="1c30e086-72bf-8001-9479-e4b917d33f39" class="">6. Explanatory</h2><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1c30e086-72bf-80c6-949d-e999de6f778d" class="code"><code class="language-C++">#include &lt;ArduinoModbus.h&gt;
#include &lt;ArduinoRS485.h&gt;</code></pre><ul id="1c30e086-72bf-8010-8a07-d944fdc83699" class="bulleted-list"><li style="list-style-type:disc"><code><strong>ArduinoModbus</strong></code>: Library for Modbus communication (supports RTU and TCP).</li></ul><ul id="1c30e086-72bf-80dd-96f7-c67509720f68" class="bulleted-list"><li style="list-style-type:disc"><code><strong>ArduinoRS485</strong></code>: Library for configuring the RS485 protocol (used in Modbus RTU).</li></ul><p id="1c30e086-72bf-80a4-84bc-d84fa8da03e4" class="">
</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1c30e086-72bf-80bb-8ef1-c94734b48f21" class="code"><code class="language-C++">constexpr auto baudrate { 19200 }; 
constexpr auto btime { 1.0f / baudrate };
constexpr auto predl { btime * 9.6f * 3.5f * 1e6 };
constexpr auto postdl { btime * 9.6f * 3.5f * 1e6 };</code></pre><ul id="1c30e086-72bf-800b-b102-d7375c086ea5" class="bulleted-list"><li style="list-style-type:disc"><code><strong>baudrate</strong></code>: Serial communication rate (19200 bps).</li></ul><ul id="1c30e086-72bf-8024-a5bd-f1ce56787839" class="bulleted-list"><li style="list-style-type:disc"><code><strong>btime</strong></code>: Time per bit (1/baudrate).</li></ul><ul id="1c30e086-72bf-80a7-9d74-e5ff383041da" class="bulleted-list"><li style="list-style-type:disc"><code><strong>predl</strong></code><strong> (Pre-delay) and </strong><code><strong>postdl</strong></code><strong> (Post-delay):</strong><ul id="1c30e086-72bf-805e-88ec-e42dd4812905" class="bulleted-list"><li style="list-style-type:circle">Calculated as 3.5 character times (Modbus RTU standard for delimiting messages).</li></ul><ul id="1c30e086-72bf-80df-86db-fa59c9b88140" class="bulleted-list"><li style="list-style-type:circle"><code>9.6 * 3.5 * (1/baudrate) * 1e6</code> → Converts to microseconds (µs).</li></ul><p id="1c70e086-72bf-8014-8013-ddd1dcb0f3ac" class="">
</p></li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1c70e086-72bf-8058-b544-cb8d25b10e3d" class="code"><code class="language-C++">void setup() {
  Serial.begin(115200); // Inicia comunicação serial para debug
  delay(2000); // Espera estabilização
  RS485.setDelays(predl, postdl); // Configura delays do RS485
  if (!ModbusRTUClient.begin(baudrate, SERIAL_8N2)) {
    Serial.println(&quot;Erro Modbus&quot;);
    while(1); // Trava se falhar
  }
}</code></pre><p id="1c40e086-72bf-809d-b0e2-ca3fd789ad68" class="">
</p><p id="1c30e086-72bf-8043-9ff2-def35b9e4e49" class="">
</p><ul id="1c30e086-72bf-807a-828e-f34746ddf2e6" class="bulleted-list"><li style="list-style-type:disc"><code><strong>Serial.begin(115200)</strong></code>: Starts the serial port for monitoring (debugging).</li></ul><ul id="1c30e086-72bf-804a-96d2-fa58a61ace13" class="bulleted-list"><li style="list-style-type:disc"><code><strong>RS485.setDelays(predl, postdl)</strong></code>: Sets the pre- and post-delay times for RS485.</li></ul><ul id="1c30e086-72bf-8057-84dc-d4438082cc35" class="bulleted-list"><li style="list-style-type:disc"><code><strong>ModbusRTUClient.begin(baudrate, SERIAL_8N2)</strong></code>:<ul id="1c30e086-72bf-8087-975c-e78906f30ca9" class="bulleted-list"><li style="list-style-type:circle">Initiates Modbus RTU communication at 19200 bps, 8 data bits, 2 stop bits, no parity (typical configuration for Finder meters).</li></ul><ul id="1c30e086-72bf-80a9-817b-f9e968ee103d" class="bulleted-list"><li style="list-style-type:circle">If it fails, it goes into an infinite loop. (<code>while(1)</code>).</li></ul></li></ul><p id="1c40e086-72bf-805b-b1be-d296ffa3d085" class="">
</p><p id="1c40e086-72bf-809a-af77-e3de57b74aeb" class="">
</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1c30e086-72bf-8068-bf4f-d7d38e01b864" class="code"><code class="language-C++">void loop() {
  float p = readdata(0x21, 0x9BA); // Potência Ativa Total (W)
  float v = readdata(0x21, 0x9C4); // Tensão (V)
  float i = readdata(0x21, 0x9D4); // Corrente (A)

  Serial.println(String(p, 1) + &quot;W &quot; + String(v, 1) + &quot;V &quot; + String(i, 3) + &quot;A &quot;);
  delay(3000); // Espera 3s entre leituras
}</code></pre><p id="1c30e086-72bf-80a5-be9f-c192ba46828d" class="">
</p><ul id="1c30e086-72bf-80e4-8872-c0678e6904e6" class="bulleted-list"><li style="list-style-type:disc">Reads three parameters from the meter (address <code>0x21</code>):<ol type="1" id="1c30e086-72bf-80db-89bf-d334b1c94d5b" class="numbered-list" start="1"><li>Active Power (0x9BA) → In Watts (W).</li></ol><ol type="1" id="1c30e086-72bf-80e7-9dc7-d7b53fde15a3" class="numbered-list" start="2"><li>Voltage (0x9C4) → In Volts (V).</li></ol><ol type="1" id="1c30e086-72bf-8047-a7f1-f6075d7d2e9e" class="numbered-list" start="3"><li>Current (0x9D4) → In Amperes (A).</li></ol></li></ul><ul id="1c30e086-72bf-803a-8810-ffb6b5f0ef5e" class="bulleted-list"><li style="list-style-type:disc">Displays values in the Serial Monitor every 3 seconds.</li></ul><p id="1c30e086-72bf-80e0-bbb5-c4b93c74f61c" class="">
</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1c30e086-72bf-8044-b1ea-fea1a1f69035" class="code"><code class="language-C++">float readdata(int addr, int reg) {
  float res = 0.0;
  if (!ModbusRTUClient.requestFrom(addr, INPUT_REGISTERS, reg, 2)) {
    Serial.println(&quot;Erro de comunicação&quot;);
    Serial.println(ModbusRTUClient.lastError());
  } else {
    uint16_t word1 = ModbusRTUClient.read(); // Lê primeiro byte
    uint16_t word2 = ModbusRTUClient.read(); // Lê segundo byte
    uint32_t parz = word1 &lt;&lt; 16 | word2; // Combina em um uint32_t
    res = *(float *)&amp;parz; // Converte para float (IEEE 754)
  }
  return res;
}</code></pre><ul id="1c30e086-72bf-8044-8683-df5bfa3023e7" class="bulleted-list"><li style="list-style-type:disc"><code><strong>addr</strong></code>: Modbus device address (<code>0x21</code> = 33 in decimal).</li></ul><ul id="1c30e086-72bf-802e-940c-f776f047a208" class="bulleted-list"><li style="list-style-type:disc"><code><strong>reg</strong></code>: Modbus register to be read (ex.: <code>0x9BA</code>).</li></ul><ul id="1c30e086-72bf-80be-95de-e0d5b9428ab5" class="bulleted-list"><li style="list-style-type:disc">Steps:<ol type="1" id="1c30e086-72bf-80ed-98d2-ec15d22d28b1" class="numbered-list" start="1"><li>Make a Modbus request (<code>INPUT_REGISTERS</code>) to read 2 records (4 bytes, IEEE 754 float format).</li></ol><ol type="1" id="1c30e086-72bf-8017-85d2-f0b3441f8feb" class="numbered-list" start="2"><li>If it fails, it displays the error.</li></ol><ol type="1" id="1c30e086-72bf-807e-b0fd-ea2b76faa09f" class="numbered-list" start="3"><li>If successful:<ul id="1c30e086-72bf-8022-ab20-ce1594683f02" class="bulleted-list"><li style="list-style-type:disc">Reads 2 words (16 bits each).</li></ul><ul id="1c30e086-72bf-80b3-bfa6-cc99f7b459e5" class="bulleted-list"><li style="list-style-type:disc">Combines into a <code><strong>uint32_t</strong></code> (<code>word1 &lt;&lt; 16 | word2</code>).</li></ul><ul id="1c30e086-72bf-8060-a158-f0d260aa703b" class="bulleted-list"><li style="list-style-type:disc">Converts to <code><strong>float</strong></code><strong> using pointers (IEEE 754).</strong></li></ul><p id="1c30e086-72bf-8018-a592-d164e501e319" class="">
</p></li></ol></li></ul></div></div><p id="1c30e086-72bf-800a-9d18-ca6a31e1c63b" class="">
</p><p id="1c30e086-72bf-80ef-b9e2-f842423bb64b" class="">
</p><p id="1c30e086-72bf-8061-936f-c1b1997c91e6" class="">
</p></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>